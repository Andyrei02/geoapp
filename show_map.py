import folium


class ShowMap:
    def __init__(self, lat, long):
        lat = lat
        long = long
        
        coords_1 = [[47.75927,27.46054], [47.75779,27.45999], [47.75652,27.45940], [47.75621,27.45903], [47.7572011, 27.4578334], [47.75666,27.45695], [47.7605340, 27.4525276], [47.7615223, 27.4543951], [47.76372,27.45269], [47.76390,27.45315], [47.76366,27.45369], [47.76356,27.45418], [47.76371,27.45491], [47.76373,27.45523], [47.76361,27.45570], [47.76322,27.45665], [47.76201,27.45822], [47.75960,27.45889], [47.75950,27.45917]]
        coords_2 = [[47.75929,27.46054], [47.75941,27.45984], [47.75952,27.45910], [47.75956,27.45896], [47.75962,27.45888], [47.76201,27.45821], [47.76254,27.45750], [47.76323,27.45666], [47.76386,27.45760], [47.76392,27.45766], [47.76434,27.45858], [47.76470,27.45852], [47.76531,27.45788], [47.76539,27.45788], [47.76586,27.45793], [47.76610,27.45794], [47.76675,27.45783], [47.76766,27.45759], [47.76817,27.45752], [47.76836,27.45745], [47.76868,27.45739], [47.76879,27.45748], [47.76902,27.45783], [47.76906,27.45808], [47.76904,27.45888], [47.76899,27.45920], [47.76871,27.46020], [47.76866,27.46043], [47.76864,27.46061], [47.76857,27.46254], [47.76864,27.46268], [47.76893,27.46303], [47.76829,27.46315], [47.76800,27.46316], [47.76779,27.46312], [47.76636,27.46250], [47.76599,27.46239], [47.76352,27.46184], [47.76248,27.46152], [47.76148,27.46110], [47.76081,27.46090], [47.75935,27.46058]]
        coords_3 = [[47.75927,27.46054], [47.76893,27.46303], [47.76829,27.46315], [47.76800,27.46316], [47.76779,27.46312], [47.76636,27.46250], [47.76599,27.46239], [47.76352,27.46184], [47.76248,27.46152], [47.76148,27.46110], [47.76081,27.46090], [47.75935,27.46058], [47.76908,27.46305], [47.76922,27.46309], [47.76980,27.46340], [47.76966,27.46347], [47.76961,27.46354], [47.76960,27.46362], [47.76960,27.46392], [47.76949,27.46397], [47.76912,27.46492], [47.76890,27.46500], [47.76857,27.46484], [47.76853,27.46517], [47.76845,27.46550], [47.76825,27.46646], [47.76782,27.46794], [47.76299,27.46712], [47.76300,27.46715], [47.7579,27.4645], [47.7567,27.4644], [47.7546,27.4637], [47.7537,27.4622], [47.7553,27.4592]]
        self.territories = [
    {"name": "Teritoriu 2", "coords": coords_2, "color": "green"},
    {"name": "Teritoriu 1", "coords": coords_1, "color": "blue"},
    {"name": "Teritoriu 3", "coords": coords_3, "color": "yellow"}
     ]
        self.make_map(lat, long)

    def make_map(self, lat, long):
        # Создание карты
        mymap = folium.Map(location=[lat, long], zoom_start=17)

        # Добавление маркера для текущей геолокации
        folium.Marker([lat, long], tooltip='Текущее положение').add_to(mymap)

        for territory in self.territories:
            folium.Polygon(territory["coords"], color=territory["color"], fill=True, fill_color=territory["color"], fill_opacity=0.2, tooltip=territory["name"]).add_to(mymap)

# Сохранение карты в файл
        mymap.save('templates/map.html')

